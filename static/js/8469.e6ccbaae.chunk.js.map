{"version":3,"file":"static/js/8469.e6ccbaae.chunk.js","mappings":"sOAWe,SAASA,EACtBC,EACAC,GAEA,IAAMC,GAAkBC,EAAAA,EAAAA,aA8B1B,SAAyCH,GACvC,OAAO,SACLI,EADK,GAGkC,IAAD,eADrCC,EACqC,KAD/BC,EAC+B,KACtC,OAAQD,GACN,KAAKE,EAAAA,qBAAAA,cACH,OAAO,kBACFH,GADL,IAEEI,WAAYF,IAGhB,KAAKC,EAAAA,qBAAAA,sBAA6C,IAAD,EACzCE,EAAgBC,OAAON,EAAMI,YAC7BG,EAAmBX,EAAYY,OAAOH,GAG5C,OACEA,EAAcI,OAAS,IACvBC,EAAAA,EAAAA,UAAQ,UAACV,EAAMW,0BAAP,aAAC,EAA0BF,QAAU,GACjB,IAA5BF,EAAiBE,OAEVT,GAGF,kBACFA,GADL,IAEEW,mBAAoBJ,IAGxB,QACE,OAAOP,IA7DuBY,CAAchB,GAAc,CAC9DA,EACAC,IAEF,GAA0BgB,EAAAA,EAAAA,YAAWf,EAAiB,CACpDM,WAAY,GACZO,mBAAoB,OAFtB,eAAOX,EAAP,KAAcc,EAAd,KAKMC,GAA2BhB,EAAAA,EAAAA,cAC/BiB,EAAAA,EAAAA,WACE,kBAAMF,EAAS,CAACX,EAAAA,qBAAAA,0BAChB,KAEF,IAUF,OAAO,kBACFH,GADL,IAEEiB,uBAT6B,SAC7BC,GAEAJ,EAAS,CAACX,EAAAA,qBAAAA,cAAoCe,EAAMC,OAAOC,QAC3DL,S,sBC/BG,IAAKZ,E,0DAAZ,SAAYA,GAAAA,EAAAA,EAAAA,cAAAA,GAAAA,gBAAAA,EAAAA,EAAAA,sBAAAA,GAAAA,wBAAZ,CAAYA,IAAAA,EAAAA","sources":["hooks/useFuzzySearch/index.ts","hooks/useFuzzySearch/types.ts"],"sourcesContent":["import { useCallback, useReducer } from \"react\";\nimport Fuse from \"fuse.js\";\n\nimport {\n  E_FuzzySearchActions,\n  T_FuzzySearchAction,\n  T_FuzzySearchState\n} from \"./types\";\nimport { debounce } from \"helpers/optimization\";\nimport { toNumber } from \"helpers/number\";\n\nexport default function useFuzzySearch<T_SearchListItem>(\n  fuzzySearch: Fuse<T_SearchListItem>,\n  searchList: T_SearchListItem[]\n) {\n  const memoizedReducer = useCallback(createReducer(fuzzySearch), [\n    fuzzySearch,\n    searchList\n  ]);\n  const [state, dispatch] = useReducer(memoizedReducer, {\n    inputValue: \"\",\n    fuzzySearchResults: null\n  });\n\n  const updateFuzzySearchResults = useCallback(\n    debounce(\n      () => dispatch([E_FuzzySearchActions.setFuzzySearchResults]),\n      200 // Update search results if 100ms passed after user has stopped typing\n    ),\n    []\n  );\n\n  const handleInputValueChange = (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    dispatch([E_FuzzySearchActions.setInputValue, event.target.value]);\n    updateFuzzySearchResults();\n  };\n\n  return {\n    ...state,\n    handleInputValueChange\n  };\n}\n\nfunction createReducer<T_SearchListItem>(fuzzySearch: Fuse<T_SearchListItem>) {\n  return function searchReducer(\n    state: T_FuzzySearchState<T_SearchListItem>,\n    [type, payload]: T_FuzzySearchAction\n  ): T_FuzzySearchState<T_SearchListItem> {\n    switch (type) {\n      case E_FuzzySearchActions.setInputValue: {\n        return {\n          ...state,\n          inputValue: payload\n        };\n      }\n      case E_FuzzySearchActions.setFuzzySearchResults: {\n        const inputValueStr = String(state.inputValue);\n        const newSearchResults = fuzzySearch.search(inputValueStr);\n\n        // Do not update state if new search results are empty\n        if (\n          inputValueStr.length > 2 &&\n          toNumber(state.fuzzySearchResults?.length) > 1 &&\n          newSearchResults.length === 0\n        ) {\n          return state;\n        }\n\n        return {\n          ...state,\n          fuzzySearchResults: newSearchResults\n        };\n      }\n      default:\n        return state;\n    }\n  };\n}\n","import Fuse from \"fuse.js\";\n\nimport { T_Nullable } from \"types/generic\";\nimport { T_StringOrNumber } from \"types/common\";\n\nexport enum E_FuzzySearchActions {\n  setInputValue,\n  setFuzzySearchResults\n}\n\nexport type T_FuzzySearchState<T_SearchListItem> = {\n  inputValue: T_StringOrNumber;\n  fuzzySearchResults: T_Nullable<Fuse.FuseResult<T_SearchListItem>[]>;\n};\n\nexport type T_FuzzySearchAction = [type: E_FuzzySearchActions, payload?: any];\n"],"names":["useFuzzySearch","fuzzySearch","searchList","memoizedReducer","useCallback","state","type","payload","E_FuzzySearchActions","inputValue","inputValueStr","String","newSearchResults","search","length","toNumber","fuzzySearchResults","createReducer","useReducer","dispatch","updateFuzzySearchResults","debounce","handleInputValueChange","event","target","value"],"sourceRoot":""}